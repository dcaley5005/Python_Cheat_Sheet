---
title: "Data Visualization"
---

# Packages
## Visualization
```{python}

import plotly.express as px
import matplotlib.pyplot as plt
import seaborn as sns

```


## Transformation
```{python}

import pandas as pd
import numpy as np

```



# Data
```{python echo=False}

sales = pd.read_csv(
    'data/sales_data.csv',
    parse_dates=['Date']
)

sales = sales.sort_values(by=['Date'], ascending = True)

Quantity_total = sales.groupby(['State'])['Order_Quantity'].sum().reset_index()

# Group the data by state and calculate the sum of the order quantity for each state
sales_stacked_ratio = sales.groupby(['State','Age_Group'])['Order_Quantity'].sum().reset_index()

# Divide the Order Quantity by the state total to get the percentage of the order quantity for each age group in each state
sales_stacked_ratio['Percent_Weight'] = sales_stacked_ratio['Order_Quantity']/ sales_stacked_ratio.groupby('State')['Order_Quantity'].transform('sum')

```



# Bar Chart
```{python}

fig = px.bar(Quantity_total, x="State", y="Order_Quantity", 
            title="Age Group Share by State")

fig

```


# Stacked Bar Chart
```{python}

fig = px.bar(sales_stacked_ratio, x="State", y="Percent_Weight", color="Age_Group", 
            title="Age Group Share by State")


```

# Rotate Labels
```{python}

fig = px.bar(sales_stacked_ratio, x="State", y="Percent_Weight", color="Age_Group", 
            title="Age Group Share by State")
            
fig.update_xaxes(tickangle=45)

```

# Tick Labels
```{python}

fig.update_yaxes(tickformat=".0%")

```


```{python}

fig.update_yaxes(tickformat="0%")

```


# Histogram
```{python}

px.histogram(sales, x = 'Unit_Cost')

```

# Facet Wrap
```{python}

px.histogram(sales, x = 'Unit_Cost', facet_col='Age_Group', facet_col_wrap=2)

```

# Scatter
```{python}

df = px.data.gapminder()
fig = px.scatter(df, x="gdpPercap", y="lifeExp", color="continent", size="pop",
           hover_name="country", log_x=True, size_max=60)
           
fig
```


# Multiple Fig Updates
```{python}

fig.update_xaxes(showgrid=False, zeroline=False)
fig

```


